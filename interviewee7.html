<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Interviewee Practice</title>

<style>
  body {
    font-family: system-ui, Arial, sans-serif;
    background: linear-gradient(135deg, #ff9aa2, #ffd1d6);
    padding: 20px;
    margin: 0;
  }

  .app {
    max-width: 420px;
    margin: auto;
  }

  h1 {
    text-align: center;
    color: white;
    margin-bottom: 20px;
  }

  .card {
    background: white;
    border-radius: 18px;
    padding: 18px;
    margin-bottom: 16px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
  }

  .sentence {
    font-size: 18px;
    font-weight: 600;
  }

  button {
    width: 100%;
    margin-top: 12px;
    padding: 14px;
    font-size: 16px;
    border: none;
    border-radius: 12px;
    background: #ff6f7d;
    color: white;
    cursor: pointer;
  }

  button:active {
    transform: scale(0.98);
  }

  .recording {
    margin-top: 10px;
    text-align: center;
    color: #c0392b;
    font-weight: bold;
    display: none;
  }

  .words {
    margin-top: 14px;
  }

  .word {
    display: inline-block;
    padding: 6px 10px;
    margin: 4px 4px 0 0;
    border-radius: 8px;
    background: #eee;
    font-size: 14px;
    pointer-events: none;
  }

  .correct { background: #b6f2b6; }
  .wrong { background: #f4b6b6; }

  /* ===== JOB LIST DISPLAY FOR NUMBER 2 ===== */
  .job-list {
    margin-top: 10px;
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 6px;
  }

  .job-item {
    font-size: 13px;
    background: #ddd;
    padding: 4px 8px;
    border-radius: 6px;
  }

  /* ===== PHRASE LIST DISPLAY FOR NUMBER 3/4/6 ===== */
  .phrase-list {
    margin-top: 10px;
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 6px;
  }

  .phrase-item {
    font-size: 13px;
    background: #ddd;
    padding: 4px 8px;
    border-radius: 6px;
  }
</style>
</head>
<body>

<div class="app">
  <h1>🗣 Interviewee</h1>
  <div id="app"></div>
</div>

<script>
/* ===== COUNTRY DATA ===== */
const countries = [
  "germany","united kingdom","england","japan","united states","usa",
  "hong kong","colombia","italy","portugal"
];

const countryDisplay = {
  "germany": "Germany",
  "united kingdom": "United Kingdom",
  "england": "England",
  "japan": "Japan",
  "united states": "United States",
  "usa": "USA",
  "hong kong": "Hong Kong",
  "colombia": "Colombia",
  "italy": "Italy",
  "portugal": "Portugal"
};

/* ===== NORMALISE SPOKEN COUNTRY ===== */
function normaliseCountry(input) {
  let text = input
    .replace(/\./g, "")
    .replace(/\s+/g, " ")
    .trim();

  if (text === "u s a") return "usa";

  return text;
}

/* ===== JOB DATA FOR NUMBER 2 ===== */
const jobs = [
  "baseball player","hero","football player","basketball player","plumber",
  "detective","singer","dancer","youtuber","actor","engineer","actress",
  "figure skater","skater","adventurer","scientist"
];

/* ===== PHRASES FOR NUMBER 3 ===== */
const phrases3 = [
  "explore old places","think about ideas","act in movies","practice skating",
  "build rockets and cars","practice kung fu","make videos",
  "practice singing and dancing","practice singing","solve mysteries",
  "fix pipes","practice basketball","practice football","train",
  "practice baseball"
];

/* ===== PHRASES FOR NUMBER 4 ===== */
const phrases4 = [
  "catch criminals","control my power","jump over enemies","perform jumps",
  "memorize lines","solve problems","fight enemies","score goals",
  "memorize long scripts","hit home runs","launch rockets successfully",
  "do dangerous stunts","plan big challenges","dance and sing at the same time",
  "write new songs","score under pressure"
];

/* ===== ADJECTIVES FOR NUMBER 6 ===== */
const adjectives6 = [
  "funny","hardworking","determined","cheerful","brave","happy","kind",
  "nervous","smart","curious","strong","confident","energetic","focused",
  "adventurous","creative","serious"
];

/* ===== SENTENCES ===== */
const items = [
  { display: "I am from ____________", expected: "i am from" },
  { display: "I am __________", expected: "i am a teacher" }, // number 2
  { display: "Every day, I __________", expected: "every day i work" }, // number 3
  { display: "It is difficult to ___________", expected: "it is difficult to wake up early" }, // number 4
  { display: "I am _____ and _____", expected: "i am happy and funny" } // number 6
];

const app = document.getElementById("app");

/* ===== UI BUILD ===== */
items.forEach((item, index) => {
  const card = document.createElement("div");
  card.className = "card";

  const sentenceDiv = document.createElement("div");
  sentenceDiv.className = "sentence";
  sentenceDiv.textContent = `${index + 1}. ${item.display}`;

  const btn = document.createElement("button");
  btn.textContent = "Start Speaking";

  const indicator = document.createElement("div");
  indicator.className = "recording";
  indicator.textContent = "🎙 Recording...";

  const wordsDiv = document.createElement("div");
  wordsDiv.className = "words";

  card.appendChild(sentenceDiv);

  /* ===== NUMBER 2: JOB LIST ===== */
  if(index === 1){
    const jobListDiv = document.createElement("div");
    jobListDiv.className = "job-list";
    jobs.forEach(job=>{
      const article = /^[aeiou]/i.test(job) ? "an" : "a";
      const jobItem = document.createElement("div");
      jobItem.className="job-item";
      jobItem.textContent = `${article} ${job}`;
      jobListDiv.appendChild(jobItem);
    });
    card.appendChild(jobListDiv);
  }

  /* ===== NUMBER 3: PHRASE LIST ===== */
  if(index === 2){
    const phraseListDiv = document.createElement("div");
    phraseListDiv.className = "phrase-list";
    phrases3.forEach(phrase=>{
      const phraseItem = document.createElement("div");
      phraseItem.className="phrase-item";
      phraseItem.textContent=phrase;
      phraseListDiv.appendChild(phraseItem);
    });
    card.appendChild(phraseListDiv);
  }

  /* ===== NUMBER 4: PHRASE LIST ===== */
  if(index === 3){
    const phraseListDiv = document.createElement("div");
    phraseListDiv.className = "phrase-list";
    phrases4.forEach(phrase=>{
      const phraseItem = document.createElement("div");
      phraseItem.className="phrase-item";
      phraseItem.textContent=phrase;
      phraseListDiv.appendChild(phraseItem);
    });
    card.appendChild(phraseListDiv);
  }

  /* ===== NUMBER 6: ADJECTIVES LIST ===== */
  if(index === 5){
    const adjListDiv = document.createElement("div");
    adjListDiv.className = "phrase-list";
    adjListDiv.style.justifyContent = "center";
    adjectives6.forEach(adj=>{
      const adjItem = document.createElement("div");
      adjItem.className="phrase-item";
      adjItem.textContent=adj;
      adjListDiv.appendChild(adjItem);
    });
    card.appendChild(adjListDiv);
  }

  card.appendChild(btn);
  card.appendChild(indicator);
  card.appendChild(wordsDiv);

  app.appendChild(card);

  btn.onclick = () => startRecognition(item, index, wordsDiv, indicator);
});

/* ===== SPEECH LOGIC ===== */
function startRecognition(item, index, container, indicator) {
  container.innerHTML = "";

  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  if (!SpeechRecognition) {
    alert("Speech recognition not supported.");
    return;
  }

  const recognition = new SpeechRecognition();
  recognition.lang = "en-US";
  recognition.interimResults = false;

  indicator.style.display = "block";
  recognition.start();

  recognition.onresult = (event) => {
    indicator.style.display = "none";

    const spoken = event.results[0][0].transcript
      .toLowerCase()
      .replace(/[^\w\s]/g, "")
      .trim();

    const spokenWords = spoken.split(" ");

    /* ===== NUMBER 1 LOGIC ===== */
    if(index === 0){
      const baseWords = ["i","am","from"];
      baseWords.forEach((word,i)=>{
        const span = document.createElement("span");
        span.className = "word";
        span.textContent = word==="i"?"I":word;
        span.classList.add(spokenWords[i]===word?"correct":"wrong");
        container.appendChild(span);
      });

      const rawCountry = spokenWords.slice(3).join(" ");
      const normalisedCountry = normaliseCountry(rawCountry);
      const countrySpan = document.createElement("span");
      countrySpan.className = "word";
      if(countries.includes(normalisedCountry)){
        countrySpan.textContent = countryDisplay[normalisedCountry];
        countrySpan.classList.add("correct");
      }else{
        countrySpan.textContent = rawCountry ? rawCountry.charAt(0).toUpperCase() + rawCountry.slice(1) : "________";
        countrySpan.classList.add("wrong");
      }
      container.appendChild(countrySpan);
      return;
    }

    /* ===== NUMBER 2 LOGIC ===== */
    if(index === 1){
      const article = spokenWords[2]==="an" || spokenWords[2]==="a" ? spokenWords[2] : "";
      const jobSpoken = spokenWords.slice(3).join(" ");
      const span1 = document.createElement("span");
      span1.className="word";
      span1.textContent="I";
      span1.classList.add(spokenWords[0]==="i"?"correct":"wrong");
      container.appendChild(span1);
      const span2 = document.createElement("span");
      span2.className="word";
      span2.textContent="am";
      span2.classList.add(spokenWords[1]==="am"?"correct":"wrong");
      container.appendChild(span2);
      const span3 = document.createElement("span");
      span3.className="word";
      span3.textContent=article;
      span3.classList.add(["a","an"].includes(article)?"correct":"wrong");
      container.appendChild(span3);
      const span4 = document.createElement("span");
      span4.className="word";
      if(jobs.includes(jobSpoken)){
        span4.textContent=jobSpoken;
        span4.classList.add("correct");
      }else{
        span4.textContent=jobSpoken || "________";
        span4.classList.add("wrong");
      }
      container.appendChild(span4);
      return;
    }

    /* ===== NUMBER 3 LOGIC ===== */
    if(index === 2){
      let iOffset = 0;
      if(spokenWords[0] === "everyday"){
        iOffset = 1;
      } else if(spokenWords[0] === "every" && spokenWords[1] === "day"){
        iOffset = 2;
      }
      const spanEvery = document.createElement("span");
      spanEvery.className = "word";
      spanEvery.textContent = "Every";
      spanEvery.classList.add("correct");
      container.appendChild(spanEvery);
      const spanDay = document.createElement("span");
      spanDay.className = "word";
      spanDay.textContent = "day";
      spanDay.classList.add("correct");
      container.appendChild(spanDay);
      const spanI = document.createElement("span");
      spanI.className = "word";
      spanI.textContent = "I";
      spanI.classList.add(spokenWords[iOffset]==="i"?"correct":"wrong");
      container.appendChild(spanI);
      iOffset++;
      const phraseSpoken = spokenWords.slice(iOffset).join(" ");
      const spanPhrase = document.createElement("span");
      spanPhrase.className = "word";
      if(phrases3.includes(phraseSpoken)){
        spanPhrase.textContent = phraseSpoken;
        spanPhrase.classList.add("correct");
      } else {
        spanPhrase.textContent = phraseSpoken || "________";
        spanPhrase.classList.add("wrong");
      }
      container.appendChild(spanPhrase);
      return;
    }

    /* ===== NUMBER 4 LOGIC ===== */
    if(index === 3){
      const baseSentence = ["It","is","difficult","to"];
      baseSentence.forEach((word,i)=>{
        const span = document.createElement("span");
        span.className="word";
        span.textContent = word;
        span.classList.add(spokenWords[i]===word.toLowerCase() ? "correct":"wrong");
        container.appendChild(span);
      });
      const phraseSpoken = spokenWords.slice(4).join(" ");
      const spanPhrase = document.createElement("span");
      spanPhrase.className="word";
      if(phrases4.includes(phraseSpoken)){
        spanPhrase.textContent = phraseSpoken;
        spanPhrase.classList.add("correct");
      } else {
        spanPhrase.textContent = phraseSpoken || "________";
        spanPhrase.classList.add("wrong");
      }
      container.appendChild(spanPhrase);
      return;
    }

    /* ===== NUMBER 6 LOGIC ===== */
    if(index === 5){
      const spanI = document.createElement("span");
      spanI.className="word";
      spanI.textContent="I";
      spanI.classList.add(spokenWords[0]==="i"?"correct":"wrong");
      container.appendChild(spanI);

      const spanAm = document.createElement("span");
      spanAm.className="word";
      spanAm.textContent="am";
      spanAm.classList.add(spokenWords[1]==="am"?"correct":"wrong");
      container.appendChild(spanAm);

      const adj1 = spokenWords[2] || "";
      const spanAdj1 = document.createElement("span");
      spanAdj1.className="word";
      spanAdj1.textContent = adjectives6.includes(adj1) ? adj1 : (adj1 || "________");
      spanAdj1.classList.add(adjectives6.includes(adj1) ? "correct":"wrong");
      container.appendChild(spanAdj1);

      const spanAnd = document.createElement("span");
      spanAnd.className="word";
      spanAnd.textContent="and";
      spanAnd.classList.add(spokenWords[3]==="and"?"correct":"wrong");
      container.appendChild(spanAnd);

      const adj2 = spokenWords[4] || "";
      const spanAdj2 = document.createElement("span");
      spanAdj2.className="word";
      spanAdj2.textContent = adjectives6.includes(adj2) ? adj2 : (adj2 || "________");
      spanAdj2.classList.add(adjectives6.includes(adj2) ? "correct":"wrong");
      container.appendChild(spanAdj2);

      return;
    }

    /* ===== DEFAULT LOGIC ===== */
    const expectedWords = item.expected.split(" ");
    expectedWords.forEach((expected, i) => {
      const span = document.createElement("span");
      span.className = "word";
      const displayWord = expected==="i"?"I":expected;
      if(spokenWords[i]===expected){
        span.textContent = displayWord;
        span.classList.add("correct");
      }else{
        span.textContent = spokenWords[i] || displayWord;
        span.classList.add("wrong");
      }
      container.appendChild(span);
    });
  };

  recognition.onend = () => {
    indicator.style.display = "none";
  };
}
</script>

</body>
</html>
